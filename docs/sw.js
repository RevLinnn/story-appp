const CACHE_NAME="static-cache-v1",STATIC_ASSETS=["/","/index.html","/bundle.js","/style.css","/favicon.png"];self.addEventListener("install",(t=>{console.log("[SW] Installing..."),t.waitUntil(caches.open(CACHE_NAME).then((t=>t.addAll(STATIC_ASSETS)))),self.skipWaiting()})),self.addEventListener("activate",(t=>{console.log("[SW] Activated"),t.waitUntil(caches.keys().then((t=>Promise.all(t.filter((t=>t!==CACHE_NAME)).map((t=>caches.delete(t))))))),self.clients.claim()})),self.addEventListener("fetch",(t=>{if("GET"!==t.request.method)return;const e=new URL(t.request.url);"http:"!==e.protocol&&"https:"!==e.protocol||t.respondWith(caches.match(t.request).then((e=>e||fetch(t.request).then((e=>caches.open(CACHE_NAME).then((s=>(s.put(t.request,e.clone()),e))))).catch((()=>{})))))})),self.addEventListener("push",(t=>{let e="Dicoding Story";const s={body:"Push message received!",icon:"/icon-192.png",vibrate:[100,50,100]};if(t.data)try{const n=t.data.text(),o=JSON.parse(n);e=o.title||e,s.body=o.options?.body||s.body,o.options?.icon&&(s.icon=o.options.icon),o.options?.vibrate&&(s.vibrate=o.options.vibrate),o.options?.actions&&(s.actions=o.options.actions)}catch(e){s.body=t.data.text()}t.waitUntil(self.registration.showNotification(e,s))}));