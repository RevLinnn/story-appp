const CACHE_NAME="static-cache-v1",STATIC_ASSETS=["/story-appp/","/story-appp/index.html","/story-appp/bundle.js","/story-appp/style.css","/story-appp/favicon.png"];self.addEventListener("install",(t=>{console.log("[SW] Installing..."),t.waitUntil(caches.open(CACHE_NAME).then((t=>t.addAll(STATIC_ASSETS)))),self.skipWaiting()})),self.addEventListener("activate",(t=>{console.log("[SW] Activated"),t.waitUntil(caches.keys().then((t=>Promise.all(t.filter((t=>t!==CACHE_NAME)).map((t=>caches.delete(t))))))),self.clients.claim()})),self.addEventListener("fetch",(t=>{if("GET"!==t.request.method)return;const e=new URL(t.request.url);"http:"!==e.protocol&&"https:"!==e.protocol||t.respondWith(caches.match(t.request).then((e=>e||fetch(t.request).then((e=>caches.open(CACHE_NAME).then((s=>(s.put(t.request,e.clone()),e))))).catch((()=>{})))))})),self.addEventListener("push",(t=>{let e="Dicoding Story";const s={body:"Push message received!",icon:"icon-192.png",vibrate:[100,50,100]};if(t.data)try{const o=t.data.text(),n=JSON.parse(o);e=n.title||e,s.body=n.options?.body||s.body,n.options?.icon&&(s.icon=n.options.icon),n.options?.vibrate&&(s.vibrate=n.options.vibrate),n.options?.actions&&(s.actions=n.options.actions)}catch(e){s.body=t.data.text()}t.waitUntil(self.registration.showNotification(e,s))}));